@page "/UsersList/{SetHashCode:int}"
@using Scan2Go.UI.BaseClasses
@inject StateContainer StateContainer

<EditUserPopup @ref="editUserPopup" OnUserSaved="HandleEntitySaved" UserId=@_clickedUserId />

<div>
    <h2>@userListPassingObject.EntityName List</h2>
    <DynamicBaseList PassingObject=@userListPassingObject OnRowDoubleClick=@OpenUserEditPopup />
    @*  <MyComponent /> *@

</div>

@code {
    [Parameter] public int SetHashCode { get; set; }
    public PassingObject userListPassingObject { get; set; }
    public int _clickedUserId;
    private EditUserPopup editUserPopup;

    protected override async Task OnParametersSetAsync()
    {
        userListPassingObject = StateContainer.GetRoutingObjectParameter<PassingObject>(SetHashCode);
    }

    protected override async Task OnInitializedAsync()
    {

    }

    private async Task OpenUserEditPopup(int userId)
    {
        _clickedUserId = userId;

        await editUserPopup.SetUserId(_clickedUserId);
    }

    // Callback method to handle user saved event
    private async Task HandleEntitySaved()
    {
        // Reload the users list when the user is successfully saved
        // await editUserPopup.SetUserId(0);
        // StateHasChanged();
    }
}
